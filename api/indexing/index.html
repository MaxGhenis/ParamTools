


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
      
        <title>Extend with Indexing - ParamTools Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a676eddb.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#extend-with-indexing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="ParamTools Docs" class="md-header-nav__button md-logo" aria-label="ParamTools Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ParamTools Docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Extend with Indexing
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ParamTools Docs" class="md-nav__button md-logo" aria-label="ParamTools Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    ParamTools Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../parameters/" title="Parameters" class="md-nav__link">
      Parameters
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      API
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="API" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/" title="Guide" class="md-nav__link">
      Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extend/" title="Extend" class="md-nav__link">
      Extend
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Extend with Indexing
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Extend with Indexing" class="md-nav__link md-nav__link--active">
      Extend with Indexing
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-for-getting-tax-calculator-index-rates" class="md-nav__link">
    Code for getting Tax-Calculator index rates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom-adjust/" title="Custom Adjustments" class="md-nav__link">
      Custom Adjustments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom-types/" title="Custom Types" class="md-nav__link">
      Custom Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reference/" title="Reference" class="md-nav__link">
      Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-for-getting-tax-calculator-index-rates" class="md-nav__link">
    Code for getting Tax-Calculator index rates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="extend-with-indexing">Extend with Indexing</h1>
<p>ParamTools provides out-of-the-box parameter indexing. This is helpful for projects that have parameters that change at some rate over time. For example, tax parameters like the standard deduction are often indexed to price inflation. So, the value of the standard deduction actually increases every year by 1 or 2% depending on that year's inflation rate.</p>
<p>The <a href="/api/extend/">extend documentation</a> may be useful for gaining a better understanding of how ParamTools extends parameter values along <code>label_to_extend</code>.</p>
<p>To use the indexing feature:</p>
<ul>
<li>Set the <code>label_to_extend</code> class attribute to the label that should be extended</li>
<li>Set the <code>indexing_rates</code> class attribute to a dictionary of inflation rates where the keys correspond to the value of <code>label_to_extend</code> and the values are the indexing rates.</li>
<li>Set the <code>uses_extend_func</code> class attribute to <code>True</code>.</li>
<li>In <code>defaults</code> or <code>defaults.json</code>, set <code>indexed</code> to <code>True</code> for each parameter that needs to be indexed.</li>
</ul>
<h2 id="example">Example</h2>
<p>This is a continuation of the tax parameters example from the <a href="/api/extend/">extend documentation</a>. The differences are <code>indexed</code> is set to <code>True</code> for the <code>standard_deducation</code> parameter, <code>uses_extend_func</code> is set to <code>True</code>, and <code>index_rates</code> is specified with inflation rates obtained from the open-source tax modeling package, <a href="https://github.com/PSLmodels/Tax-Calculator/">Tax-Calculator</a>, using version 2.5.0.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">paramtools</span>


<span class="k">class</span> <span class="nc">TaxParams</span><span class="p">(</span><span class="n">paramtools</span><span class="o">.</span><span class="n">Parameters</span><span class="p">):</span>
    <span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;labels&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;validators&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">2013</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">2027</span><span class="p">}}</span>
                <span class="p">},</span>
                <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;validators&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;choice&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;choices&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;single&quot;</span><span class="p">,</span> <span class="s2">&quot;joint&quot;</span><span class="p">]}}</span>
                <span class="p">},</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;standard_deduction&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Standard deduction amount&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Amount filing unit can use as a standard deduction.&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span>

            <span class="c1"># Set indexed to True to extend standard_deduction with the built-in</span>
            <span class="c1"># extension logic.</span>
            <span class="s2">&quot;indexed&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>

            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2017</span><span class="p">,</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="s2">&quot;single&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">6350</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2017</span><span class="p">,</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="s2">&quot;joint&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">12700</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2018</span><span class="p">,</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="s2">&quot;single&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">12000</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2018</span><span class="p">,</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="s2">&quot;joint&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">24000</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2026</span><span class="p">,</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="s2">&quot;single&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">7685</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2026</span><span class="p">,</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="s2">&quot;joint&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">15369</span><span class="p">}],</span>
            <span class="s2">&quot;validators&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">9e+99</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="n">array_first</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">label_to_extend</span> <span class="o">=</span> <span class="s2">&quot;year&quot;</span>
    <span class="c1"># Activate use of extend_func method.</span>
    <span class="n">uses_extend_func</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1"># inflation rates from Tax-Calculator v2.5.0</span>
    <span class="n">index_rates</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">2013</span><span class="p">:</span> <span class="mf">0.0148</span><span class="p">,</span>
        <span class="mi">2014</span><span class="p">:</span> <span class="mf">0.0159</span><span class="p">,</span>
        <span class="mi">2015</span><span class="p">:</span> <span class="mf">0.0012</span><span class="p">,</span>
        <span class="mi">2016</span><span class="p">:</span> <span class="mf">0.0127</span><span class="p">,</span>
        <span class="mi">2017</span><span class="p">:</span> <span class="mf">0.0187</span><span class="p">,</span>
        <span class="mi">2018</span><span class="p">:</span> <span class="mf">0.0224</span><span class="p">,</span>
        <span class="mi">2019</span><span class="p">:</span> <span class="mf">0.0186</span><span class="p">,</span>
        <span class="mi">2020</span><span class="p">:</span> <span class="mf">0.0233</span><span class="p">,</span>
        <span class="mi">2021</span><span class="p">:</span> <span class="mf">0.0229</span><span class="p">,</span>
        <span class="mi">2022</span><span class="p">:</span> <span class="mf">0.0228</span><span class="p">,</span>
        <span class="mi">2023</span><span class="p">:</span> <span class="mf">0.0221</span><span class="p">,</span>
        <span class="mi">2024</span><span class="p">:</span> <span class="mf">0.0211</span><span class="p">,</span>
        <span class="mi">2025</span><span class="p">:</span> <span class="mf">0.0209</span><span class="p">,</span>
        <span class="mi">2026</span><span class="p">:</span> <span class="mf">0.0211</span><span class="p">,</span>
        <span class="mi">2027</span><span class="p">:</span> <span class="mf">0.0208</span><span class="p">,</span>
        <span class="mi">2028</span><span class="p">:</span> <span class="mf">0.021</span><span class="p">,</span>
        <span class="mi">2029</span><span class="p">:</span> <span class="mf">0.021</span>
    <span class="p">}</span>


<span class="n">params</span> <span class="o">=</span> <span class="n">TaxParams</span><span class="p">()</span>
<span class="n">params</span><span class="o">.</span><span class="n">standard_deduction</span>

<span class="c1"># output:</span>
<span class="c1"># array([[ 6074.92, 12149.84],</span>
<span class="c1">#        [ 6164.83, 12329.66],</span>
<span class="c1">#        [ 6262.85, 12525.7 ],</span>
<span class="c1">#        [ 6270.37, 12540.73],</span>
<span class="c1">#        [ 6350.  , 12700.  ],</span>
<span class="c1">#        [12000.  , 24000.  ],</span>
<span class="c1">#        [12268.8 , 24537.6 ],</span>
<span class="c1">#        [12497.  , 24994.  ],</span>
<span class="c1">#        [12788.18, 25576.36],</span>
<span class="c1">#        [13081.03, 26162.06],</span>
<span class="c1">#        [13379.28, 26758.55],</span>
<span class="c1">#        [13674.96, 27349.91],</span>
<span class="c1">#        [13963.5 , 27926.99],</span>
<span class="c1">#        [ 7685.  , 15369.  ],</span>
<span class="c1">#        [ 7847.15, 15693.29]])</span>
</code></pre></div>


<p>Adjustments are also indexed. In the example below, <code>standard_deduction</code> is set to 10,000 in 2017, increased to 15,000 for single tax units in 2020, and increased to 20,000 for joint tax units in 2021:</p>
<div class="codehilite"><pre><span></span><code><span class="n">params</span><span class="o">.</span><span class="n">adjust</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;standard_deduction&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2017</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="s2">&quot;single&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">15000</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2021</span><span class="p">,</span> <span class="s2">&quot;marital_status&quot;</span><span class="p">:</span> <span class="s2">&quot;joint&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">20000</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">params</span><span class="o">.</span><span class="n">standard_deduction</span>

<span class="c1"># output:</span>
<span class="c1"># array([[ 6074.92, 12149.84],</span>
<span class="c1">#        [ 6164.83, 12329.66],</span>
<span class="c1">#        [ 6262.85, 12525.7 ],</span>
<span class="c1">#        [ 6270.37, 12540.73],</span>
<span class="c1">#        [10000.  , 10000.  ],</span>
<span class="c1">#        [10187.  , 10187.  ],</span>
<span class="c1">#        [10415.19, 10415.19],</span>
<span class="c1">#        [15000.  , 10608.91],</span>
<span class="c1">#        [15349.5 , 20000.  ],</span>
<span class="c1">#        [15701.  , 20458.  ],</span>
<span class="c1">#        [16058.98, 20924.44],</span>
<span class="c1">#        [16413.88, 21386.87],</span>
<span class="c1">#        [16760.21, 21838.13],</span>
<span class="c1">#        [17110.5 , 22294.55],</span>
<span class="c1">#        [17471.53, 22764.97]])</span>
</code></pre></div>


<p>All values that are added automatically via the <code>extend</code> method are given an <code>_auto</code> attribute. You can select them like this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">params</span> <span class="o">=</span> <span class="n">TaxParams</span><span class="p">()</span>

<span class="n">params</span><span class="o">.</span><span class="n">select_eq</span><span class="p">(</span>
    <span class="s2">&quot;standard_deduction&quot;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_auto</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># [{&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2013, &#39;value&#39;: 5840.42},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2014, &#39;value&#39;: 5985.26},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2015, &#39;value&#39;: 6140.28},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2016, &#39;value&#39;: 6209.05},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2019, &#39;value&#39;: 12388.8},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2020, &#39;value&#39;: 12743.12},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2021, &#39;value&#39;: 13167.47},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2022, &#39;value&#39;: 13600.68},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2023, &#39;value&#39;: 14046.78},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2024, &#39;value&#39;: 14497.68},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2025, &#39;value&#39;: 14948.56},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;single&#39;, &#39;year&#39;: 2027, &#39;value&#39;: 7924.0},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2013, &#39;value&#39;: 11680.85},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2014, &#39;value&#39;: 11970.54},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2015, &#39;value&#39;: 12280.58},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2016, &#39;value&#39;: 12418.12},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2019, &#39;value&#39;: 24777.6},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2020, &#39;value&#39;: 25486.24},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2021, &#39;value&#39;: 26334.93},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2022, &#39;value&#39;: 27201.35},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2023, &#39;value&#39;: 28093.55},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2024, &#39;value&#39;: 28995.35},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2025, &#39;value&#39;: 29897.11},</span>
<span class="c1">#  {&#39;_auto&#39;: True, &#39;marital_status&#39;: &#39;joint&#39;, &#39;year&#39;: 2027, &#39;value&#39;: 15846.98}]</span>
</code></pre></div>


<p>If you want to update the index rates and apply them to your existing values, then all you need to do is remove the values that were added automatically. ParamTools will fill in the missing values using the updated index rates:</p>
<div class="codehilite"><pre><span></span><code><span class="n">params</span> <span class="o">=</span> <span class="n">TaxParams</span><span class="p">()</span>

<span class="n">offset</span> <span class="o">=</span> <span class="mf">0.0025</span>
<span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">rate</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">index_rates</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">params</span><span class="o">.</span><span class="n">index_rates</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">rate</span> <span class="o">+</span> <span class="n">offset</span>

<span class="n">automatically_added</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">select_eq</span><span class="p">(</span>
    <span class="s2">&quot;standard_deduction&quot;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_auto</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">params</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;standard_deduction&quot;</span><span class="p">:</span> <span class="n">automatically_added</span>
    <span class="p">}</span>
<span class="p">)</span>

<span class="n">params</span><span class="o">.</span><span class="n">standard_deduction</span>

<span class="c1"># array([[ 5783.57, 11567.15],</span>
<span class="c1">#        [ 5941.46, 11882.93],</span>
<span class="c1">#        [ 6110.2 , 12220.41],</span>
<span class="c1">#        [ 6193.91, 12387.83],</span>
<span class="c1">#        [ 6350.  , 12700.  ],</span>
<span class="c1">#        [12000.  , 24000.  ],</span>
<span class="c1">#        [12418.8 , 24837.6 ],</span>
<span class="c1">#        [12805.02, 25610.05],</span>
<span class="c1">#        [13263.44, 26526.89],</span>
<span class="c1">#        [13732.97, 27465.94],</span>
<span class="c1">#        [14217.74, 28435.49],</span>
<span class="c1">#        [14709.67, 29419.36],</span>
<span class="c1">#        [15203.91, 30407.85],</span>
<span class="c1">#        [ 7685.  , 15369.  ],</span>
<span class="c1">#        [ 7943.22, 15885.4 ]])</span>
</code></pre></div>


<h3 id="code-for-getting-tax-calculator-index-rates">Code for getting Tax-Calculator index rates</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">taxcalc</span>
<span class="n">pol</span> <span class="o">=</span> <span class="n">taxcalc</span><span class="o">.</span><span class="n">Policy</span><span class="p">()</span>
<span class="n">index_rates</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">year</span><span class="p">:</span> <span class="n">value</span>
    <span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">2029</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span> <span class="n">pol</span><span class="o">.</span><span class="n">inflation_rates</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div>


<p>Note that there are some subtle details that are implemented in Tax-Calculator's indexing logic that are not implemented in this example. Tax-Calculator has a parameter called <code>CPI_offset</code> that adjusts inflation rates up or down by a fixed amount. The <code>indexed</code> property can also be turned on and off for each parameter. Implementing these nuanced features is left as the proverbial "trivial exercise to the reader."</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../extend/" title="Extend" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Extend
              </div>
            </div>
          </a>
        
        
          <a href="../custom-adjust/" title="Custom Adjustments" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Custom Adjustments
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="../../assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>